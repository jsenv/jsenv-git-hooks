{"version":3,"file":"main.cjs","sources":["../../node_modules/@jsenv/util/src/internal/ensureUrlTrailingSlash.js","../../node_modules/@jsenv/util/src/isFileSystemPath.js","../../node_modules/@jsenv/util/src/fileSystemPathToUrl.js","../../node_modules/@jsenv/util/src/assertAndNormalizeDirectoryUrl.js","../../node_modules/@jsenv/util/src/assertAndNormalizeFileUrl.js","../../node_modules/@jsenv/util/src/internal/statsToType.js","../../node_modules/@jsenv/util/src/urlToFileSystemPath.js","../../node_modules/@jsenv/util/src/internal/permissions.js","../../node_modules/@jsenv/util/src/writeFileSystemNodePermissions.js","../../node_modules/@jsenv/util/src/readFileSystemNodeStat.js","../../node_modules/@jsenv/util/src/writeDirectory.js","../../node_modules/@jsenv/util/src/readDirectory.js","../../node_modules/@jsenv/util/src/resolveUrl.js","../../node_modules/@jsenv/util/src/removeFileSystemNode.js","../../node_modules/@jsenv/util/src/ensureWindowsDriveLetter.js","../../node_modules/@jsenv/util/src/ensureParentDirectories.js","../../node_modules/@jsenv/util/src/writeSymbolicLink.js","../../node_modules/@jsenv/util/src/readFile.js","../../node_modules/@jsenv/util/src/writeFile.js","../../node_modules/@jsenv/logger/src/LOG_LEVELS.js","../../node_modules/@jsenv/logger/src/createLogger.js","../../node_modules/@jsenv/cancellation/src/cancelError.js","../../node_modules/@jsenv/cancellation/src/internal/arrayHelper.js","../../node_modules/@jsenv/cancellation/src/createCancellationSource.js","../../node_modules/@jsenv/cancellation/src/createCancellationTokenForProcessSIGINT.js","../../src/internal/wrapAsyncFunction.js","../../src/internal/hook.js","../../src/installGitHooks.js","../../src/uninstallGitHooks.js"],"sourcesContent":null,"names":["ensureUrlTrailingSlash","url","endsWith","isFileSystemPath","value","TypeError","startsWithWindowsDriveLetter","string","firstChar","test","secondChar","fileSystemPathToUrl","Error","String","pathToFileURL","assertAndNormalizeDirectoryUrl","urlString","URL","href","e","startsWith","assertAndNormalizeFileUrl","baseUrl","statsToType","stats","isFile","isDirectory","isSymbolicLink","isFIFO","isSocket","isCharacterDevice","isBlockDevice","undefined","urlToFileSystemPath","fileUrl","length","slice","fileSystemPath","fileURLToPath","S_IRUSR","S_IWUSR","S_IXUSR","S_IRGRP","S_IWGRP","S_IXGRP","S_IROTH","S_IWOTH","S_IXOTH","permissionsToBinaryFlags","owner","group","others","binaryFlags","read","write","execute","writeFileSystemNodePermissions","source","permissions","sourceUrl","sourcePath","getPermissionOrComputeDefault","chmodNaive","Promise","resolve","reject","chmod","error","actionLevels","subjectLevels","action","subject","subjectPermissions","actionLevel","actionFallback","Object","keys","find","actionFallbackCandidate","subjectLevel","subjectFallback","subjectFallbackCandidate","isWindows","process","platform","readFileSystemNodeStat","nullIfNotFound","followLink","handleNotFoundOption","handleNotFoundError","readStat","handlePermissionDeniedError","nodeMethod","stat","lstat","statsObject","code","mkdir","promises","writeDirectory","destination","recursive","allowUseless","destinationUrl","destinationPath","destinationStats","destinationType","readDirectory","emfileMaxWait","directoryUrl","directoryPath","startMs","Date","now","attemptCount","attempt","readdirNaive","handleTooManyFilesOpenedError","nowMs","timeSpentWaiting","setTimeout","readdir","names","resolveUrl","specifier","removeFileSystemNode","maxRetries","retryDelay","onlyContent","sourceStats","removeNonDirectory","removeDirectory","retryCount","unlinkNaive","handleTemporaryError","unlink","rootDirectoryUrl","visit","visitFile","visitSymbolicLink","visitDirectory","optionsFromRecursive","handleNotEmptyError","removeDirectoryContent","removeDirectoryNaive","handlePermissionError","open","openError","fd","close","closeError","all","map","name","symbolicLinkUrl","rmdir","lstatObject","baseUrlFallback","cwd","ensureParentDirectories","destinationParentPath","dirname","readFilePromisified","promisify","readFileNode","readFile","filePath","buffer","toString","writeFile","writeFileNode","content","LOG_LEVEL_OFF","LOG_LEVEL_DEBUG","LOG_LEVEL_INFO","LOG_LEVEL_WARN","LOG_LEVEL_ERROR","createLogger","logLevel","debug","info","warn","debugDisabled","infoDisabled","warnDisabled","errorDisabled","console","createCancelError","reason","cancelError","isCancelError","arrayWithout","array","item","arrayWithoutItem","i","push","createCancellationSource","requested","registrationArray","cancel","registrationArrayCopy","forEach","registration","callback","register","existingRegistration","unregister","throwIfRequested","token","cancellationRequested","createCancellationTokenForProcessSIGINT","SIGINTCancelSource","on","wrapAsyncFunction","asyncFunction","updateProcessExitCode","catch","exitCode","HOOK_NAMES","generateHookFileContent","hookCommand","hookIsGeneratedByUs","hookFileContent","includes","installGitHooks","cancellationToken","projectDirectoryUrl","ci","env","CI","logger","packageJsonFileUrl","packageJsonFileString","packageJsonData","JSON","parse","scripts","hookName","hookScriptName","hookFileUrl","hookFileStats","hookScriptPresence","hookFilePresence","Boolean","hookFileContentForScript","writeHook","uninstallGitHooks"],"mappings":"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"}